(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[729],{5323:function(e,t,a){Promise.resolve().then(a.bind(a,7641))},7641:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var l=a(7437),s=a(2265),n=a(3303);function r(){let[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(null),[c,i]=(0,s.useState)(!0),[d,o]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[m,g]=(0,s.useState)(!1);async function b(){let{data:e,error:t}=await n.O.from("system_settings").select("value").eq("key","google_selected_calendar_id").single();e&&r(e.value)}async function f(){i(!0),o(null);try{let e=await fetch("/api/google/calendars");if(!e.ok){let t=await e.json().catch(()=>null);if(401===e.status)g(!1);else{let a=(null==t?void 0:t.error)||"Failed to fetch calendars: ".concat(e.statusText);throw Error(a)}return}let a=await e.json();t(a),g(!0)}catch(e){o(e.message)}finally{i(!1)}}async function x(){if(o(null),h(null),!a){o("Please select a calendar.");return}let{error:e}=await n.O.from("system_settings").upsert({key:"google_selected_calendar_id",value:a},{onConflict:"key"});e?o(e.message):h("Calendar selection saved successfully!")}return(0,s.useEffect)(()=>{b(),f()},[]),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Calendar Settings"}),m?c?(0,l.jsx)("div",{children:"Loading calendars..."}):(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Select a Calendar for Scheduling"}),(0,l.jsx)("div",{className:"space-y-2 mb-6",children:e.map(e=>(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"radio",id:e.id,name:"calendar",value:e.id,checked:a===e.id,onChange:e=>r(e.target.value),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,l.jsx)("label",{htmlFor:e.id,className:"ml-3 block text-sm font-medium text-gray-700",children:e.summary})]},e.id))}),(0,l.jsx)("button",{onClick:x,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400",disabled:!a,children:"Save Selection"})]}):(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md text-center",children:[(0,l.jsx)("p",{className:"mb-4",children:"You need to connect your Google Account to manage calendar settings."}),(0,l.jsx)("button",{onClick:()=>{window.location.href="/api/auth/google"},className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600",children:"Connect to Google Calendar"})]}),d&&(0,l.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mt-4",children:d}),u&&(0,l.jsx)("div",{className:"bg-green-100 text-green-700 p-3 rounded mt-4",children:u})]})}},3303:function(e,t,a){"use strict";a.d(t,{O:function(){return r}});var l=a(7557);let s="https://xrqbldnqjmyjnurlwvlt.supabase.co",n="sb_publishable_QEAQo0wNojYKriWfnyvfbQ_r8Cc1s37";if(!s||!n)throw Error("Supabase URL and anonymous key are required.");let r=(0,l.eI)(s,n)}},function(e){e.O(0,[557,971,117,744],function(){return e(e.s=5323)}),_N_E=e.O()}]);