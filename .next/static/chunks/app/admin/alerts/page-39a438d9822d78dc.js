(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{5275:function(e,s,t){Promise.resolve().then(t.bind(t,6745))},6745:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return r}});var a=t(7437),l=t(3303),n=t(2265);function r(){let[e,s]=(0,n.useState)([]),[t,r]=(0,n.useState)(!0),[d,c]=(0,n.useState)(null),[i,u]=(0,n.useState)(null),[o,h]=(0,n.useState)("new");async function x(){r(!0),c(null);let e=l.O.from("system_alerts").select("*").order("created_at",{ascending:!1}).limit(50);"new"===o&&(e=e.eq("status","new"));let{data:t,error:a}=await e;a&&c(a.message),s(t||[]),r(!1)}async function m(e){c(null),u(null);let{error:s}=await l.O.from("system_alerts").update({status:"acknowledged"}).eq("id",e);s?c(s.message):(u("Alert marked as read."),x())}return(0,n.useEffect)(()=>{x()},[o]),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"System Alerts"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("button",{onClick:()=>h("new"),className:"px-4 py-2 rounded mr-2 ".concat("new"===o?"bg-blue-500 text-white":"bg-gray-200"),disabled:"new"===o,children:"Show New"}),(0,a.jsx)("button",{onClick:()=>h("all"),className:"px-4 py-2 rounded ".concat("all"===o?"bg-blue-500 text-white":"bg-gray-200"),disabled:"all"===o,children:"Show All"})]}),d&&(0,a.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:d}),i&&(0,a.jsx)("div",{className:"bg-green-100 text-green-700 p-3 rounded mb-4",children:i}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:t?(0,a.jsx)("div",{children:"Loading..."}):e.length?(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"p-2",children:"Type"}),(0,a.jsx)("th",{className:"p-2",children:"Message"}),(0,a.jsx)("th",{className:"p-2",children:"Created At"}),(0,a.jsx)("th",{className:"p-2",children:"Status"}),(0,a.jsx)("th",{className:"p-2"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"p-2",children:e.type}),(0,a.jsx)("td",{className:"p-2",children:e.message}),(0,a.jsx)("td",{className:"p-2",children:new Date(e.created_at).toLocaleString()}),(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("new"===e.status?"bg-red-200 text-red-800":"bg-green-200 text-green-800"),children:e.status})}),(0,a.jsx)("td",{className:"p-2 text-right",children:"new"===e.status?(0,a.jsx)("button",{onClick:()=>m(e.id),className:"bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-300",children:"Mark as Read"}):(0,a.jsx)("span",{className:"text-gray-400",children:"Read"})})]},e.id))})]}):(0,a.jsx)("div",{children:"No alerts found for the selected filter."})})]})}},3303:function(e,s,t){"use strict";t.d(s,{O:function(){return r}});var a=t(7557);let l="https://xrqbldnqjmyjnurlwvlt.supabase.co",n="sb_publishable_QEAQo0wNojYKriWfnyvfbQ_r8Cc1s37";if(!l||!n)throw Error("Supabase URL and anonymous key are required.");let r=(0,a.eI)(l,n)}},function(e){e.O(0,[557,971,117,744],function(){return e(e.s=5275)}),_N_E=e.O()}]);