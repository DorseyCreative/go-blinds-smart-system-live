(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[398],{6402:function(e,t,i){Promise.resolve().then(i.bind(i,8009))},8009:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=i(7437),l=i(7557),r=i(2265);let c=(0,l.eI)("https://xrqbldnqjmyjnurlwvlt.supabase.co","sb_publishable_QEAQo0wNojYKriWfnyvfbQ_r8Cc1s37");function s(){let[e,t]=(0,r.useState)([]),[i,l]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null),[d,a]=(0,r.useState)(null),[u,h]=(0,r.useState)({code:"",description:"",price:"",duration_minutes:""}),[m,p]=(0,r.useState)(null),[x,g]=(0,r.useState)({});async function j(){l(!0),o(null);let{data:e,error:i}=await c.from("line_item_catalog").select("*").order("code",{ascending:!0});i&&o(i.message),t(e||[]),l(!1)}async function b(e){e.preventDefault(),o(null),a(null);let{code:t,description:i,price:n,duration_minutes:l}=u;if(!t||!i||!n||!l){o("All fields are required.");return}let{error:r}=await c.from("line_item_catalog").insert([{code:t,description:i,price:Number(n),duration_minutes:Number(l),active:!0}]);r?o(r.message):(a("Line item created."),h({code:"",description:"",price:"",duration_minutes:""}),j())}async function f(e){o(null),a(null);let{description:t,price:i,duration_minutes:n}=x;if(!t||!i||!n){o("All fields are required.");return}let{error:l}=await c.from("line_item_catalog").update({description:t,price:Number(i),duration_minutes:Number(n),updated_at:new Date().toISOString()}).eq("code",e);l?o(l.message):(a("Line item updated."),p(null),g({}),j())}async function v(e,t){o(null),a(null);let{error:i}=await c.from("line_item_catalog").update({active:!t,updated_at:new Date().toISOString()}).eq("code",e);i?o(i.message):(a("Status updated."),j())}return(0,r.useEffect)(()=>{j()},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Line Item Catalog"}),(0,n.jsxs)("form",{onSubmit:b,style:{marginBottom:24},children:[(0,n.jsx)("input",{placeholder:"Code",value:u.code,onChange:e=>h({...u,code:e.target.value}),style:{marginRight:8}}),(0,n.jsx)("input",{placeholder:"Description",value:u.description,onChange:e=>h({...u,description:e.target.value}),style:{marginRight:8}}),(0,n.jsx)("input",{placeholder:"Price",type:"number",value:u.price,onChange:e=>h({...u,price:e.target.value}),style:{marginRight:8,width:80}}),(0,n.jsx)("input",{placeholder:"Duration (min)",type:"number",value:u.duration_minutes,onChange:e=>h({...u,duration_minutes:e.target.value}),style:{marginRight:8,width:120}}),(0,n.jsx)("button",{type:"submit",children:"Add Line Item"})]}),s&&(0,n.jsx)("div",{style:{color:"red",marginBottom:8},children:s}),d&&(0,n.jsx)("div",{style:{color:"green",marginBottom:8},children:d}),i?(0,n.jsx)("div",{children:"Loading..."}):e.length?(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left"},children:"Code"}),(0,n.jsx)("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left"},children:"Description"}),(0,n.jsx)("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left"},children:"Price ($)"}),(0,n.jsx)("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left"},children:"Duration (min)"}),(0,n.jsx)("th",{style:{borderBottom:"1px solid #ccc",textAlign:"left"},children:"Active"}),(0,n.jsx)("th",{style:{borderBottom:"1px solid #ccc"}})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.code}),(0,n.jsx)("td",{children:m===e.code?(0,n.jsx)("input",{value:x.description,onChange:e=>g({...x,description:e.target.value})}):e.description}),(0,n.jsx)("td",{children:m===e.code?(0,n.jsx)("input",{type:"number",value:x.price,onChange:e=>g({...x,price:e.target.value}),style:{width:80}}):e.price}),(0,n.jsx)("td",{children:m===e.code?(0,n.jsx)("input",{type:"number",value:x.duration_minutes,onChange:e=>g({...x,duration_minutes:e.target.value}),style:{width:120}}):e.duration_minutes}),(0,n.jsx)("td",{children:e.active?"Yes":"No"}),(0,n.jsx)("td",{children:m===e.code?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>f(e.code),children:"Save"})," ",(0,n.jsx)("button",{onClick:()=>{p(null),g({})},children:"Cancel"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{p(e.code),g(e)},children:"Edit"})," ",(0,n.jsx)("button",{onClick:()=>v(e.code,e.active),children:e.active?"Deactivate":"Activate"})]})})]},e.code))})]}):(0,n.jsx)("div",{children:"No line items found."})]})}}},function(e){e.O(0,[557,971,117,744],function(){return e(e.s=6402)}),_N_E=e.O()}]);