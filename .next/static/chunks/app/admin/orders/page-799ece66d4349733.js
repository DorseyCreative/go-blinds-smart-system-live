(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{18:function(e,r,s){Promise.resolve().then(s.bind(s,6665))},6665:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return l}});var t=s(7437),a=s(3303),n=s(2265),d=s(7648);function l(){let[e,r]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),[o,c]=(0,n.useState)(null),[u,i]=(0,n.useState)(null),[m,h]=(0,n.useState)({customer_name:"",work_order_number:"",status:"Pending",labor_to_do:""});async function b(){l(!0),c(null);let{data:e,error:s}=await a.O.from("customer_orders").select("*").order("created_at",{ascending:!1});s&&c(s.message),r(e||[]),l(!1)}async function x(e){e.preventDefault(),c(null),i(null);let{customer_name:r,work_order_number:s,status:t,labor_to_do:n}=m;if(!r||!s||!t){c("Customer name, work order number, and status are required.");return}let{error:d}=await a.O.from("customer_orders").insert([{customer_name:r,work_order_number:s,status:t,labor_to_do:n}]);d?c(d.message):(i("Order created successfully."),h({customer_name:"",work_order_number:"",status:"Pending",labor_to_do:""}),b())}return(0,n.useEffect)(()=>{b()},[]),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Customer Orders"}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Add New Order"}),(0,t.jsxs)("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)("input",{className:"p-2 border rounded",placeholder:"Customer Name",value:m.customer_name,onChange:e=>h({...m,customer_name:e.target.value})}),(0,t.jsx)("input",{className:"p-2 border rounded",placeholder:"Work Order Number",value:m.work_order_number,onChange:e=>h({...m,work_order_number:e.target.value})}),(0,t.jsxs)("select",{className:"p-2 border rounded",value:m.status,onChange:e=>h({...m,status:e.target.value}),children:[(0,t.jsx)("option",{children:"Pending"}),(0,t.jsx)("option",{children:"Scheduled"}),(0,t.jsx)("option",{children:"In Progress"}),(0,t.jsx)("option",{children:"Completed"}),(0,t.jsx)("option",{children:"Cancelled"})]}),(0,t.jsx)("textarea",{className:"p-2 border rounded md:col-span-2",placeholder:"Labor To Do (optional)",value:m.labor_to_do,onChange:e=>h({...m,labor_to_do:e.target.value})}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Add Order"})})]})]}),o&&(0,t.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:o}),u&&(0,t.jsx)("div",{className:"bg-green-100 text-green-700 p-3 rounded mb-4",children:u}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:s?(0,t.jsx)("div",{children:"Loading..."}):e.length?(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"p-2",children:"Customer"}),(0,t.jsx)("th",{className:"p-2",children:"Work Order #"}),(0,t.jsx)("th",{className:"p-2",children:"Status"}),(0,t.jsx)("th",{className:"p-2",children:"Labor To Do"}),(0,t.jsx)("th",{className:"p-2"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"p-2",children:e.customer_name}),(0,t.jsx)("td",{className:"p-2",children:e.work_order_number}),(0,t.jsx)("td",{className:"p-2",children:e.status}),(0,t.jsx)("td",{className:"p-2 truncate max-w-xs",children:e.labor_to_do}),(0,t.jsx)("td",{className:"p-2 text-right",children:(0,t.jsx)(d.default,{href:"/admin/orders/".concat(e.id),className:"bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-300",children:"Edit"})})]},e.id))})]}):(0,t.jsx)("div",{children:"No orders found."})})]})}},3303:function(e,r,s){"use strict";s.d(r,{O:function(){return d}});var t=s(7557);let a="https://xrqbldnqjmyjnurlwvlt.supabase.co",n="sb_publishable_QEAQo0wNojYKriWfnyvfbQ_r8Cc1s37";if(!a||!n)throw Error("Supabase URL and anonymous key are required.");let d=(0,t.eI)(a,n)},7648:function(e,r,s){"use strict";s.d(r,{default:function(){return a.a}});var t=s(2972),a=s.n(t)}},function(e){e.O(0,[557,972,971,117,744],function(){return e(e.s=18)}),_N_E=e.O()}]);